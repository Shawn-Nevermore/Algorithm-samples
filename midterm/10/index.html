<!DOCTYPE html>
<html lang="en">

<!-- 
    著名面试题：

    如何实现数组去重？
    假设有数组 array = [1,5,2,3,4,2,3,1,3,4]
    你要写一个函数 unique，使得
    unique(array) 的值为 [1,5,2,3,4]
    也就是把重复的值都去掉，只保留不重复的值。

    要求：

    不要做多重循环，只能遍历一次
    请给出两种方案，一种能在 ES 5 环境中运行，一种能在 ES 6 环境中运行（提示 ES 6 环境多了一个 Set 对象）

 -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>数组去重</title>
</head>

<body>
    <script>
        // ES5方案
        // hash：计数排序的变形
        function dedupe(array) {
            var hash = {}
            var result = []
            for (var i = 0; i < array.length; i++) {
                if (!hash[array[i]]) {
                    result.push(array[i])
                    hash[array[i]] = true
                }
            }
            return result
        }

        var arr = [2, 1, 2, 3, 1, 2, 3, 1, 1]

        // weakmap:
        function dedupeMap(array) {
            let map = new WeakMap()
            let res = []
            for (let i = 0; i < array.length; i++) {
                let obj = Object(array[i])
                if (!map.has(obj)) {
                    res.push(array[i])
                    map.set(obj, true)
                }
            }
            return res
        }

        console.log(dedupeMap(arr));

    </script>
</body>

</html>